<!DOCTYPE HTML>
<html>
<head>
	<link rel="stylesheet" href="css/NGCHM.css">
    <script src="javascript/MatrixManager.js"></script>
    
    <title>Map Page</title>
	<script type="text/Javascript">
	
    //Manager used to get heatmap data.
    var mgr = new MatrixManager(MatrixManager.WEB_SOURCE);
    var map = null;
	var gotThumb = 0;
    
    function dataUpdate(event, level) {
    	if (event == MatrixManager.Event_NEWDATA && level == MatrixManager.THUMBNAIL_LEVEL) {
       		var elapsedTime = Date.now();
       		for (var i = 1; i <= map.getNumRows(MatrixManager.THUMBNAIL_LEVEL); i++) {
       			for (var j = 1; j <= map.getNumColumns(MatrixManager.THUMBNAIL_LEVEL); j++) {
       				map.getValue(MatrixManager.THUMBNAIL_LEVEL, i, j);
       			}
       		}
       		gotThumb = 1;
    	}
    	if (event == MatrixManager.Event_NEWDATA && (level == MatrixManager.SUMMARY_LEVEL || level == MatrixManager.FULL_LEVEL)) {
       		if (gotThumb == 1) {
           		var elapsedTime = Date.now();
           		for (var i = 1; i <= map.getNumRows(MatrixManager.SUMMARY_LEVEL); i++) {
           			for (var j = 1; j <= map.getNumColumns(MatrixManager.SUMMARY_LEVEL); j++) {
           				map.getValue(MatrixManager.SUMMARY_LEVEL, i, j);
           			}
           		}
       		}
    	}
    }
    
    function getAllMapData(chmName) {
        map = mgr.getHeatMap(chmName, dataUpdate);
    };

	
	</script>
</head>
<body>
	<p>
	Get Matrix 1   <button onclick="getAllMapData('HDGT')">Start</button> 
	</p>
	<canvas id='canvas'></canvas>
</body>
</html>
